---
title: "Social logins (OAuth)"
description: "Implement Google, Apple, Discord, and X OAuth using the Turnkey Swift SDK (iOS) with SwiftUI."
sidebarTitle: "Social logins"
---

## Overview

This guide shows how to implement social logins with the Turnkey Swift SDK on iOS using SwiftUI.  
The SDK launches the provider in the system browser, retrieves an OIDC token, and (by default) completes login or signup through the Auth Proxy.

Before you begin:

- Ensure you've completed the setup in [Getting Started](/sdks/swift/getting-started).
- Set provider client IDs and `appScheme` in your `TurnkeyConfig`; configure `redirectUri` in the Turnkey Dashboard (Auth Proxy).
- Add your app scheme to iOS URL Types (Info.plist) so the OAuth redirect returns to your app.

## Configure providers (client IDs)

Define your app scheme and provider client IDs, then pass them into `TurnkeyConfig`:

```swift Constants.swift
enum Constants {
  enum App {
    static let scheme = "your-app-scheme"
  }
  enum Google { static let clientId = "<your_google_client_id>" }
  enum Apple  { static let clientId = "<your_apple_client_id>" }
  enum X      { static let clientId = "<your_x_client_id>" }
  enum Discord{ static let clientId = "<your_discord_client_id>" }
}
```

```swift DemoWalletApp.swift
import SwiftUI
import TurnkeySwift

@main
struct DemoWalletApp: App {
    @StateObject private var turnkey: TurnkeyContext

    init() {
        let config = TurnkeyConfig(
            apiUrl: "https://api.turnkey.com",
            authProxyUrl: "https://authproxy.turnkey.com",
            authProxyConfigId: "<your_auth_proxy_config_id>",
            rpId: "<your_rp_id>",
            organizationId: "<your_organization_id>",
            auth: .init(
                oauth: .init(
                    appScheme: Constants.App.scheme,
                    providers: .init(
                        google: .init(clientId: Constants.Google.clientId),
                        apple: .init(clientId: Constants.Apple.clientId),
                        x: .init(clientId: Constants.X.clientId),
                        discord: .init(clientId: Constants.Discord.clientId)
                    )
                )
            )
        )
        TurnkeyContext.configure(config)
        _turnkey = StateObject(wrappedValue: TurnkeyContext.shared)
    }

    var body: some Scene {
        WindowGroup { /* ... */ }
    }
}
```

## Helper: presentation anchor

All OAuth helpers require an `ASPresentationAnchor` to present the system web auth session:

```swift Anchor.swift
import SwiftUI
import AuthenticationServices

func defaultAnchor() -> ASPresentationAnchor? {
    UIApplication.shared
        .connectedScenes
        .compactMap { $0 as? UIWindowScene }
        .first(where: { $0.activationState == .foregroundActive })?
        .windows
        .first(where: { $0.isKeyWindow })
}
```

## Google and Apple (OIDC)

Use `handleGoogleOAuth` or `handleAppleOAuth`.

```swift LoginView.swift
import SwiftUI
import AuthenticationServices
import TurnkeySwift

struct LoginView: View {
    @EnvironmentObject var turnkey: TurnkeyContext

    var body: some View {
        VStack(spacing: 12) {
            Button("Continue with Google") {
                Task {
                    guard let anchor = defaultAnchor() else { return }
                    try await turnkey.handleGoogleOAuth(anchor: anchor)
                }
            }
            Button("Continue with Apple") {
                Task {
                    guard let anchor = defaultAnchor() else { return }
                    try await turnkey.handleAppleOAuth(anchor: anchor)
                }
            }
        }
        .padding()
    }
}
```

Optional parameters:

- `clientId`: Override the configured client ID.
- `sessionKey`: Store the resulting session under a custom key.
- `additionalState`: Append extra key-value pairs to the OAuth request state.

## Discord and X (OAuth2 PKCE)

Use `handleDiscordOAuth` or `handleXOauth`.

```swift LoginView.swift
import SwiftUI
import AuthenticationServices
import TurnkeySwift

struct LoginView: View {
    @EnvironmentObject var turnkey: TurnkeyContext

    var body: some View {
        VStack(spacing: 12) {
            Button("Continue with Discord") {
                Task {
                    guard let anchor = defaultAnchor() else { return }
                    try await turnkey.handleDiscordOAuth(anchor: anchor)
                }
            }
            Button("Continue with X") {
                Task {
                    guard let anchor = defaultAnchor() else { return }
                    try await turnkey.handleXOauth(anchor: anchor)
                }
            }
        }
        .padding()
    }
}
```

## Advanced: onOAuthSuccess callback

If you pass `onOAuthSuccess`, the helper returns early with the `oidcToken` and the `publicKey` associated with the session. You can then call `completeOAuth(...)` yourself (for example, to customize `sessionKey` or sub-organization creation). Wrap async work in a `Task` since the callback is not `async`.

```swift LoginView.swift
import SwiftUI
import AuthenticationServices
import TurnkeySwift

struct LoginView: View {
    @EnvironmentObject var turnkey: TurnkeyContext

    var body: some View {
        Button("Continue with Google") {
            Task {
                guard let anchor = defaultAnchor() else { return }
                try await turnkey.handleGoogleOAuth(
                    anchor: anchor,
                    sessionKey: "main",
                    onOAuthSuccess: { success in
                        // success.oidcToken, success.publicKey, success.providerName
                        Task {
                            _ = try await turnkey.completeOAuth(
                                oidcToken: success.oidcToken,
                                publicKey: success.publicKey,
                                sessionKey: "main"
                            )
                        }
                    }
                )
            }
        }
    }
}
```

## Using completeOAuth directly

If you already obtained an OIDC token from your own OAuth flow, call `completeOAuth(oidcToken:publicKey:...)` to finish authentication via the Auth Proxy.  
The `publicKey` must match the key used to compute the nonce included in the OIDC token.

```swift
let result = try await turnkey.completeOAuth(
    oidcToken: "<oidc_token_from_provider>",
    publicKey: "<matching_public_key>",
    sessionKey: "main"
)
// result.session is stored automatically when completeOAuth succeeds
```

### Notes

- If `onOAuthSuccess` is not provided, `handleGoogleOAuth`, `handleAppleOAuth`, `handleDiscordOAuth`, and `handleXOauth` will complete authentication internally and store a session.
- For Discord and X (OAuth2 PKCE), ensure `clientId`, `redirectUri`, and app `scheme` are configured in both the Turnkey Dashboard and your `TurnkeyConfig`.
- For Google and Apple (OIDC), ensure `clientId` and app `scheme` are configured.
- You can override `clientId`, pass a `sessionKey`, or add `additionalState` in each helper call.

Next steps:

- [Passkeys](/sdks/swift/authentication/passkey)
- [Email & SMS](/sdks/swift/authentication/email-sms)
- [Proxy Middleware](/sdks/swift/proxy-middleware)
- [Signing](/sdks/swift/signing)
