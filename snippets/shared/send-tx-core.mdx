## Using `@turnkey/core` directly

For custom frameworks or full manual control (client-side).

You will call:

### `ethSendTransaction(params)`
→ returns `{ sendTransactionStatusId }`

### `solSendTransaction(params)`
→ returns `{ sendTransactionStatusId }`

### `pollTransactionStatus(params)`
→ returns chain-specific status (`eth.txHash` or `sol.signature`)

### Step 1 — Create a client

If you're on a Node.js backend, use `@turnkey/sdk-server` and initialize the server client like this:

```ts
import { Turnkey } from "@turnkey/sdk-server";

const client = new Turnkey({
  apiBaseUrl: "https://api.turnkey.com/",
  apiPrivateKey: process.env.TURNKEY_API_PRIVATE_KEY,
  apiPublicKey: process.env.TURNKEY_API_PUBLIC_KEY,
  defaultOrganizationId: process.env.TURNKEY_ORGANIZATION_ID,
}).apiClient();
```

For `@turnkey/core`, create the client like this:

```ts
import { Turnkey } from "@turnkey/core";

const client = new Turnkey({
  apiBaseUrl: "https://api.turnkey.com",
  defaultOrganizationId: process.env.TURNKEY_ORG_ID,
});
```

---

### Step 2 — Submit the transaction (Ethereum)

```ts
const sendTransactionStatusId = await client.ethSendTransaction({
  transaction: {
    from: walletAccount.address,
    to: "0xRecipient",
    caip2: "eip155:8453",
    sponsor: true,
    value: "0",
    data: "0x",
    nonce: "0",
  },
});
```

OR (Solana):

```ts
const sendTransactionStatusId = await client.solSendTransaction({
  transaction: {
    signWith: walletAccount.address, // Solana address
    unsignedTransaction: "<base64-serialized-unsigned-solana-tx>",
    caip2: "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1", // devnet
    sponsor: true,
    // recentBlockhash: "<recent blockhash>", // optional
  },
});
```

---

### Step 3 — Wait for inclusion

```ts
const pollResult = await client?.pollTransactionStatus({
  sendTransactionStatusId,
});

if (!pollResult) {
  throw new TurnkeyError(
    "Polling returned no result",
    TurnkeyErrorCodes.SIGN_AND_SEND_TRANSACTION_ERROR,
  );
}

const txHash = pollResult.eth?.txHash; // Ethereum
const signature = pollResult.sol?.signature; // Solana
const transactionId = txHash ?? signature;

if (!transactionId) {
  throw new TurnkeyError(
    "Missing transaction id in transaction result",
    TurnkeyErrorCodes.SIGN_AND_SEND_TRANSACTION_ERROR,
  );
}
console.log(transactionId);
```

---

- `ethSendTransaction` Implementation [here](https://github.com/tkhq/sdk/blob/e1dfe3e2eeb0976069aad1799597bbed64ec52f5/packages/core/src/__clients__/core.ts#L2711)
- `solSendTransaction` Implementation [here](https://github.com/tkhq/sdk/blob/e1dfe3e2eeb0976069aad1799597bbed64ec52f5/packages/core/src/__clients__/core.ts#L2848)
- `pollTransactionStatus` Implementation [here](https://github.com/tkhq/sdk/blob/e1dfe3e2eeb0976069aad1799597bbed64ec52f5/packages/core/src/__clients__/core.ts#L2936)
