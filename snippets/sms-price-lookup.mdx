export const SmsPriceLookup = ({ priceDataJson }) => {

const countries = Object.keys(priceDataJson).sort();

const toggleVisibility = () => {
const targetDiv = document.getElementById('hidden-content-simple');
if (targetDiv) {
const isOpen = targetDiv.getAttribute('data-open') === 'true';
targetDiv.setAttribute('data-open', !isOpen);
}
}

const selectCountry = (country) => {
const selectElement = document.getElementById('sms-country-select-simple');
const buttonElement = document.getElementById('country-toggle-button');
const targetDiv = document.getElementById('hidden-content-simple');
const priceDisplayElement = document.getElementById('sms-price-display');

if (selectElement) {
selectElement.value = country;
}
if (buttonElement) {
buttonElement.textContent = country;
}
if (priceDisplayElement && priceDataJson[country]) {

const price = priceDataJson[country];

priceDisplayElement.textContent = `${price}¢`;
}
if (targetDiv) {
targetDiv.setAttribute('data-open', 'false');
}
}

return (

<div className="relative">
  <div className="text-lg font-medium text-black/70 dark:text-white mb-8">
    Select Your Country To View Pricing
  </div>
  <div className="flex gap-12 items-center items-center rounded-lg callout px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-zinc-500/20 bg-zinc-50/50 dark:border-zinc-500/30 dark:bg-zinc-500/10">
    <button
      id="country-toggle-button"
      onClick={toggleVisibility}
      className="card w-full block not-prose font-normal group relative py-3 px-3 ring-2 ring-transparent rounded-xl bg-white dark:bg-background-dark border border-gray-950/10 dark:border-white/10 overflow-hidden cursor-pointer hover:!border-primary dark:hover:!border-primary-light"
    >
      Select Country
    </button>
    <div className="w-full flex flex-col gap-1 items-center">
      <div className="text-sm font-medium text-black/70 dark:text-white">Cost</div>
      <div id="sms-price-display" className="font-medium text-black/70 dark:text-white text-xl">0.000¢</div>

    </div>

    <div
      id="hidden-content-simple"
      data-open="false"
      style={{
        top: "calc(100% + 0px)",
      }}
      className="text-base bg-background-light dark:bg-background-dark absolute z-50 max-h-96 max-w-[var(--radix-dropdown-menu-content-available-width)] min-w-[var(--radix-dropdown-menu-trigger-width)] overflow-y-auto rounded-xl border-standard text-gray-950/70 dark:text-white/70 p-1 gap-2"
    >
      <div>
        {countries.map((country) => (
          <div
            key={country}
            style={{ padding: "0.5rem", cursor: "pointer" }}
            className="hover:bg-gray-100 rounded-md hover:dark:bg-gray-800"
            onClick={() => selectCountry(country)}
          >
            {country}
          </div>
        ))}
      </div>
    </div>

  </div>

</div>

);
};
